{{define "buckets"}}
{{if .Buckets}}
<div class="bucket-list">
    {{range .Buckets}}
    <div class="bucket-item" id="bucket-{{.Bucket.Name}}">
        <div class="bucket-header">
            <span class="bucket-toggle" id="bucket-toggle-{{.Bucket.Name}}" onclick="toggleBucket('{{.Bucket.Name}}')">[âˆ’]</span>
            <span class="bucket-icon">ðŸ“¦</span>
            <span class="bucket-name">{{.Bucket.Name}}</span>
            <span class="bucket-meta">({{.ObjectCount}} objects, {{.SizeDisplay}})</span>
            <div class="bucket-actions">
                <button class="retro-btn btn-tiny" onclick="openEditBucketModal('{{.Bucket.Name}}', '{{.Bucket.Location}}', '{{.Bucket.StorageClass}}')" title="Edit">[EDIT]</button>
                <button class="retro-btn btn-tiny btn-danger" onclick="confirmDeleteBucket('{{.Bucket.Name}}')" title="Delete">[DEL]</button>
            </div>
        </div>
        <div class="bucket-content" id="bucket-content-{{.Bucket.Name}}">
            <div class="bucket-info">
                <span class="info-label">Location:</span> <span class="info-value">{{.Bucket.Location}}</span>
                <span class="info-sep">|</span>
                <span class="info-label">Class:</span> <span class="info-value">{{.Bucket.StorageClass}}</span>
            </div>
            {{if .Objects}}
            <ul class="object-list">
                {{range .Objects}}
                <li class="object-item" id="object-{{.Bucket}}-{{.Name}}">
                    <span class="object-tree">â”œâ”€â”€</span>
                    <span class="object-icon">ðŸ“„</span>
                    <span class="object-name">{{.Name}}</span>
                    <span class="object-size">({{.Size}} B)</span>
                    <div class="object-actions">
                        <a class="retro-btn btn-tiny" href="/api/dashboard/buckets/{{.Bucket}}/objects/{{.Name}}" download title="Download">[â¬‡]</a>
                        <button class="retro-btn btn-tiny btn-danger" onclick="confirmDeleteObject('{{.Bucket}}', '{{.Name}}')" title="Delete">[DEL]</button>
                    </div>
                </li>
                {{end}}
            </ul>
            {{else}}
            <div class="empty-bucket">
                <span class="object-tree">â””â”€â”€</span>
                <span class="empty-text">(empty)</span>
            </div>
            {{end}}
            <div class="bucket-upload">
                <span class="object-tree">â””â”€â”€</span>
                <button class="retro-btn btn-tiny btn-primary" onclick="openUploadModal('{{.Bucket.Name}}')">[+ UPLOAD FILE]</button>
            </div>
        </div>
    </div>
    {{end}}
</div>
{{else}}
<div class="empty-state">
    <p class="empty-message">No buckets found.</p>
    <p class="empty-hint">Click [+ NEW BUCKET] to create one.</p>
</div>
{{end}}
{{end}}

